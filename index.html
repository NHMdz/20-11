<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Love Letter</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
body{
    background:#ffd6e8 url("https://png.pngtree.com/background/20230528/original/pngtree-beautiful-pink-peonies-on-a-soft-paper-background-picture-image_2782772.jpg");
    background-size:cover;
    background-position:center;
    overflow:hidden;
}

.envelope{
    width:260px;
    height:160px;
    margin:120px auto 0;
    position:relative;
    background:#e5e5e5;
    box-shadow:0 6px 20px rgba(0,0,0,.25);
    perspective:1000px;
}

.envelope .top{
    width:0;
    height:0;
    border-left:130px solid transparent;
    border-right:130px solid transparent;
    border-bottom:90px solid #d4d4d4;
    position:absolute;
    top:-90px;
    left:0;
    transform-origin:bottom;
    transform:rotateX(0deg);
    z-index:3;
    transition:1s;
}

.envelope.open .top{
    transform:rotateX(180deg);
}

.envelope .letter{
    width:240px;
    height:300px;
    background:white;
    position:absolute;
    top:20px;
    left:10px;
    z-index:2;
    border-radius:6px;
    transform:translateY(0) scale(1);
    transition:1.2s;
    background-size:cover;
    background-position:center;
}

.envelope.open .letter{
    transform:translateY(-240px) scale(1.15);
    z-index:10;
}

#viewer{
    width:240px;
    height:300px;
    background:white;
    position:absolute;
    top:-240px;
    left:10px;
    border-radius:6px;
    background-size:cover;
    background-position:center;
    opacity:0;
    transition:.5s;
    z-index:20;
    cursor:pointer;
}

#viewer.show{
    opacity:1;
}

.confetti{
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    pointer-events:none;
    z-index:999;
}
</style>
</head>
<body>

<canvas class="confetti" id="confetti"></canvas>

<div class="envelope" id="env">
    <div class="top"></div>
    <div class="letter" id="letter"></div>
    <div id="viewer"></div>
</div>

<script>
let list=[
 "https://img.meta.com.vn/Data/image/2021/10/23/nhung-cau-chuc-20-11-3.jpg",
 "https://i.pinimg.com/736x/3a/d1/10/3ad11028c6f7ca61bcd2816e6ead3979.jpg",
 "https://i.pinimg.com/736x/61/2b/f0/612bf089344f5775a3a32f1464cb147f.jpg"
]

let env=document.getElementById("env")
let letter=document.getElementById("letter")
let viewer=document.getElementById("viewer")
let index=0

letter.style.backgroundImage=`url(${list[0]})`
viewer.style.backgroundImage=`url(${list[0]})`

setTimeout(()=>env.classList.add("open"),900)

setTimeout(()=>viewer.classList.add("show"),2000)

viewer.onclick=function(){
    index++
    if(index>=list.length)return
    viewer.style.backgroundImage=`url(${list[index]})`
}

const canvas=document.getElementById("confetti")
const ctx=canvas.getContext("2d")
let W=innerWidth,H=innerHeight
canvas.width=W;canvas.height=H
let p=[]
for(let i=0;i<150;i++){
 p.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*4+1,d:Math.random()*200})
}
let a=0
function draw(){
 ctx.clearRect(0,0,W,H)
 ctx.fillStyle="rgba(255,255,255,.9)"
 p.forEach(s=>{
  ctx.beginPath()
  ctx.arc(s.x,s.y,s.r,0,2*Math.PI)
  ctx.fill()
 })
 update()
}
function update(){
 a+=0.01
 p.forEach(s=>{
  s.y+=Math.cos(a+s.d)+1+s.r/2
  s.x+=Math.sin(a)*2
  if(s.y>H){s.y=-10;s.x=Math.random()*W}
 })
}
setInterval(draw,15)
</script>

</body>
</html>
